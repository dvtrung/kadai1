# 工学部専門科目「プログラミング言語」(2016年度)

## 課題1 (締切 12/2 (金) 23:59)

__計算木__ とは以下のような2分木の一種である．

* 葉 (`leaf`) は計算木である．ただし，葉には正整数が格納されている．
* ふたつの計算木 t1 と t2 に対し，枝 (`branch(t1, t2)`) は計算木である．ただし，枝にはタイプSの枝とタイプMの枝の二種類がある．

この時，枝の価値を以下のように定義する．

* 葉の価値は，格納された整数値そのものである．
* 枝の価値は，タイプSの枝の場合は部分木の価値の和，タイプMの枝の場合は部分木の価値の積である．

### 課題1-1

Java で計算木のデータ構造をオブジェクトを使って定義し，価値を計算するためのメソッド `value` を定義せよ．
以下のインターフェースを元にすること．

### 課題1-2

OCaml で計算木のデータ構造をヴァリアントを使って定義し，価値を計算するための関数 `value_of_tree` を定義せよ．

### 課題1-3(オプション)

課題1-1のプログラムを元にして，計算木の価値を表す計算式(の文字列)に変換するメソッド `toString` を定義せよ．例えば，1を格納した葉と2を格納した葉を部分木として持つタイプSの枝の変換結果は `"(1+2)"`となる．タイプMの枝については `*` を使うこと．簡単のために枝毎に括弧をつけよ．

注意: 単に木の価値を計算してからその結果(この例であれば `"3"`) を答えとするのは認めない．(つまり，葉に格納された数値は全て文字列に含まれるようにせよ．)

### 課題1-4(オプション)

課題1-3のプログラムを元にして，括弧を適宜省いた文字列に変換するようなメソッド `toStringFewerParens()` を定義せよ．この時(いつもの算数の通り) `*` は `+` より結合が強く，どちらも左結合であると考える．すなわち

* `"((2*4)+3)"` → `"2*4+3"` はOK
* `"((2+4)*3)"` → `"2+4*3"` はダメ
* `"((2+4)*3)"` → `"(2+4)*3"` はOK
* `"((1+2)+3)"` → `"1+2+3"` はOK
* `"(1+(2+3))"` → `"1+2+3"` はダメ
* `"(1+(2+3))"` → `"1+(2+3)"` はOK
* `"((1*2)*3)"` → `"1*2*3"` はOK
* `"(1*(2*3))"` → `"1*2*3"` はダメ
* `"(1*(2*3))"` → `"1*(2*3)"` はOK

「○○演算子が左結合である」とは「同じ演算子が括弧がなく並んだ時には左側に括弧がつくように解釈する」という意味である．足し算やかけ算については結合則が成立しないので，どちらに結合しても式の値は変わらないのであまり結合に拘ることに意味はないが，例えば引き算演算子は左結合であることが重要である．

### 課題1-5(オプション)

課題1-1のプログラムを元にして，以下のような「木の簡約操作」を行うようなメソッド `reduce` を定義せよ．

> 簡約操作: ふたつの葉を部分木として持つ枝一箇所を適当に選んで，その部分木を，その部分木の価値を格納した葉で置換する


### 課題1-6(オプション)

課題1-2のプログラムを元にして，計算木の価値を表す計算式(の文字列)に変換する関数 `string_of_tree` を定義せよ．OCaml での文字列の連結に中置演算子 `^` を使う．

```{.ocaml}
# let s1 = "This is ";;
val s1 : string = "This is "
# s1 ^ "a pen.";;
- : string = "This is a pen."
```

その他の注意は課題1-3と同じである．

### 課題1-7(オプション)

課題1-6のプログラムを元にして，括弧を適宜省いた文字列に変換するような関数 `string_of_tree_fewer_parens` を定義せよ．その他の注意は課題1-4と同じである．

### 課題1-8(オプション)

課題1-2のプログラムを元にして，課題1-5にある「木の簡約操作」を行うような関数 `reduce` を定義せよ．

## プログラム作成上の注意

* 単にメソッドや関数の定義を与えるだけでなく，それがうまく動くことを確認するコードをつけること．2分探索木のそれを参考にしてほしい．
* コンパイルができないプログラムを提出した場合には採点の対象外となる．

## 提出要領

1. https://github.com/ProgrammingLanguages2016AtKUEng/kadai1 からファイルをダウンロードする．(git 使いはもちろん clone してもよい．) 
2. Java プログラムは `java` フォルダに入れること．OCaml プログラムは `ocaml/tree.ml` を編集して作成すること．
3. プログラムの説明を __課題毎に__ つけること．フォーマットは自由だが内容だけでなく読みやすさも採点の対象となる．これは，この `README.md` と同じフォルダに置くこと．
4. プログラムの説明を入れたフォルダを圧縮して zip ファイルを作り，PandA で提出すること．GitHub 使いで GitHub 経由の提出の実験~~の人柱になる~~に協力してくれる人がいると嬉しいです(以下を参照のこと)．

### GitHub 使いの人へ

1. 課題レポジトリの作成をする．https://classroom.github.com/assignment-invitations/16658a5dd9bc437a2f8370ac9c03d71b にアクセスし，手続を進めると，`kadai1-〈GitHubアカウント〉` という名前のレポジトリが生成される．(これは上の レポジトリと同内容のはずです．)
1. このレポジトリを fork，自分の PC に clone する．
1. ブランチを作って(名前はなんでもよいです)，課題に沿って編集して commit, GitHub へ push する．
1. Fork 元にプルリクを出したら提出完了．


